<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- India State Map  -->
    <title>Turnout Cholopeth</title>

    <!--  Scripts  -->
    <script type="text/javascript" src="scripts/d3.v4.js"></script>
    <script type="text/javascript" src="scripts/d3.geo.min.js"></script>

    <!--  Styles  -->
    <style type="text/css">
    svg {
      background: #eee;
      }

    #up {
      opacity: .8;
      stroke-width: .7;
      }
    </style>
  </head>

<body>
  <div id="chart"></div>
  <script type="text/javascript">
  // #00C8F8
  // #59C4C5
  // #FFC33C
  // #FBE2B4
  // #FF4C65

    var w = 1200;
    var h = 600;
    var proj = d3.geo.mercator();
    var path = d3.geo.path().projection(proj);
    var t = proj.translate(); // the projection's default translation
    var s = proj.scale() // the projection's default scale
    var map = d3.select("#chart").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
        .call(initialize);

    var india = map.append("svg:g")
        .attr("id", "up");

    d3.json("map/map.geojson", function (map) {
      d3.csv("data/turnout.csv", function(data){

        var color_scale = d3.scaleLinear().domain([0,72]).range([0,1]);

        //Create the map
        india.selectAll("path")
            .data(map.features)
            .enter().append("path")
            .attr("d", path)
            .style('stroke', function(d){
              return '#777777';
            })
            .style('fill', function(d){
              return '#08306B';
            })
            .style('opacity', function(d){
              return color_scale(data[d.properties.ac].turnout);
            });
      })
    });

    function initialize() {
      proj.scale(25000);
      proj.translate([-5000, 2250]);
    }
  </script>
</body>
</html>
